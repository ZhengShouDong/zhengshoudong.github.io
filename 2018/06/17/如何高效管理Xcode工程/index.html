<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>如何使用swift高效管理Xcode工程 | 郑郑同学</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/8.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">如何使用swift高效管理Xcode工程</h1><a id="logo" href="/.">郑郑同学</a><p class="description"></p></div><div id="nav-menu"><a class="current" href="/."><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/atom.xml"><i class="fa fa-rss"> 订阅</i></a></div></div><div class="pure-g" id="layout"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">如何使用swift高效管理Xcode工程</h1><div class="post-meta">Jun 17, 2018</div><div class="post-content"><p>导语: 在iOS自动化测试或是iOS自动化管理生成工程的过程中,会涉及到修改工程的配置和添加新的文件(Copy Bundle Resources),静态库,framework(Link Binary With Libraries),修改BundleID,修改Project Name,修改各类Search Path等…<br><a id="more"></a><br>今天要给大家介绍一个新造的”轮子”: <a href="https://github.com/ZhengShouDong/XcodeManage" target="_blank" rel="noopener">XcodeManager</a></p>
<blockquote>
<ul>
<li>Language: Swift(4.0)</li>
<li>Github: <a href="https://github.com/ZhengShouDong/XcodeManage" target="_blank" rel="noopener">XcodeManager</a> (欢迎star)</li>
</ul>
</blockquote>
<hr>
<h3 id="1-介绍基础知识"><a href="#1-介绍基础知识" class="headerlink" title="1. 介绍基础知识"></a>1. 介绍基础知识</h3><ul>
<li>Xcode工程文件指的是xcodeproj,就是平时经常打开的这个工程文件(本质是个文件夹,可通过右键显示包内容打开查看内部),xcodeproj内包含了project.pbxproj文件,xcuserdata文件夹,xcworkspace文件夹. </li>
<li>其中project.pbxproj文件内部存放了我们工程的很多关键性信息,例如Build Settings,Identity,Signing,Build Phases,我们打断点在这里也有对应的配置(是按电脑用户来隔离的,有时间以后分析一下).</li>
<li>想要管理我们想要管理的信息,例如Identity,Build Settings,Signing..就是通过改写project.pbxproj文件来操作的.</li>
</ul>
<h3 id="2-为什么会有XcodeManager"><a href="#2-为什么会有XcodeManager" class="headerlink" title="2. 为什么会有XcodeManager"></a>2. 为什么会有XcodeManager</h3><ul>
<li>前段时间在使用swift写后端来完成一些任务,这其中就遇到了需要自定义Xcode工程来编译ipa并签名.</li>
</ul>
<p>为什么不用别人写好的轮子呢?我也想用啊..不好意思没有能达到我需求的..<br>此处介绍几个其他语言编写的轮子:</p>
<blockquote>
<ul>
<li><a href="https://github.com/apache/cordova-node-xcode" target="_blank" rel="noopener">cordova-node-xcode</a> 使用JavaScript编写的库,需要node环境运行,Apache cordova用来管理Xcode工程.</li>
<li><a href="https://github.com/CocoaPods/Xcodeproj" target="_blank" rel="noopener">Xcodeproj</a>: 使用Ruby写的,CocoaPods用来操作Xcode工程的.</li>
<li><a href="https://github.com/mjmsmith/pbxplorer" target="_blank" rel="noopener">pbxplorer</a>: 使用Ruby写的库.</li>
<li><a href="https://github.com/kronenthaler/mod-pbxproj" target="_blank" rel="noopener">mod-pbxproj</a>: 使用Python编写的库.</li>
</ul>
</blockquote>
<p>曾使用swift间接调用node库<a href="https://github.com/apache/cordova-node-xcode" target="_blank" rel="noopener">cordova-node-xcode</a>来实现需求,坎坷之路不多说.说说不方便的地方吧,虽然是Apache的孵化项目下的子模块,但是Bug是真心多..由于是我使用node.js封装了一层将库内部的部分API转换为了可以使用shell来调用的node命令行程序,每一次的更改配置都会有一定的IO操作文件(大概总共几百个配置需要更改吧..)效率超级低,平均3个/s配置完成.我不是说node.js慢,在有v8的加持下它运行起来很快,但是在我的这种情况下,无法发挥最大效能.另外我不能开多线程来同时并发执行node.js,因为最终都会操作(删除,追加,修改)同一个文件.OK,就这样写入173项配置它需要60s左右的操作时间..成为了整个后端系统性能上的瓶颈.<br>只有一个想法,尽快用swift实现一个适合我们使用的库,把效率提起来!由此,<a href="https://github.com/ZhengShouDong/XcodeManage" target="_blank" rel="noopener">XcodeManager</a>“蛋”生了!!同样改动的配置数量下,两个库的时间差了近10倍.使用<a href="https://github.com/ZhengShouDong/XcodeManage" target="_blank" rel="noopener">XcodeManager</a>仅需要6s左右就可以完成同样的任务.</p>
<h3 id="3-介绍project-pbxproj文件"><a href="#3-介绍project-pbxproj文件" class="headerlink" title="3. 介绍project.pbxproj文件"></a>3. 介绍project.pbxproj文件</h3><p>project.pbxproj这个文件.它本质是个plist文件,只不过更老一代.官方名称:Property List.据说历史可追溯到乔布斯时代的NeXT的OpenStep.<br>关于文件内部的详细介绍可看这个<a href="http://www.monobjc.net/xcode-project-file-format.html" target="_blank" rel="noopener">http://www.monobjc.net/xcode-project-file-format.html</a></p>
<ul>
<li>那平时我们怎么操作这个文件的呢?</li>
<li>由于存在Xcode这个强大的IDE,所以我们不需要直接操作这个文件,在Xcode很多面板上的操作直接就关联到了这个文件内部.我们仅需要轻轻点几下General,Build Settungs,Info等面板的按钮即可完成一些配置;</li>
<li>瞧瞧这个文件的内部(篇幅有限,部分截取):<figure class="highlight nix"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* Begin PBXBuildFile section */</span></span><br><span class="line">		C1AC41E620C11E8D007A53CC <span class="comment">/* AppDelegate.m in Sources */</span> = &#123;<span class="attr">isa</span> = PBXBuildFile; <span class="attr">fileRef</span> = C1AC41E520C11E8D007A53CC <span class="comment">/* AppDelegate.m */</span>; &#125;;</span><br><span class="line">		C1AC41E920C11E8D007A53CC <span class="comment">/* ViewController.m in Sources */</span> = &#123;<span class="attr">isa</span> = PBXBuildFile; <span class="attr">fileRef</span> = C1AC41E820C11E8D007A53CC <span class="comment">/* ViewController.m */</span>; &#125;;</span><br><span class="line">		C1AC41EC20C11E8D007A53CC <span class="comment">/* Main.storyboard in Resources */</span> = &#123;<span class="attr">isa</span> = PBXBuildFile; <span class="attr">fileRef</span> = C1AC41EA20C11E8D007A53CC <span class="comment">/* Main.storyboard */</span>; &#125;;</span><br><span class="line">		C1AC41EE20C11E8E007A53CC <span class="comment">/* Assets.xcassets in Resources */</span> = &#123;<span class="attr">isa</span> = PBXBuildFile; <span class="attr">fileRef</span> = C1AC41ED20C11E8E007A53CC <span class="comment">/* Assets.xcassets */</span>; &#125;;</span><br><span class="line">		C1AC41F120C11E8E007A53CC <span class="comment">/* LaunchScreen.storyboard in Resources */</span> = &#123;<span class="attr">isa</span> = PBXBuildFile; <span class="attr">fileRef</span> = C1AC41EF20C11E8E007A53CC <span class="comment">/* LaunchScreen.storyboard */</span>; &#125;;</span><br><span class="line">		C1AC41F420C11E8E007A53CC <span class="comment">/* main.m in Sources */</span> = &#123;<span class="attr">isa</span> = PBXBuildFile; <span class="attr">fileRef</span> = C1AC41F320C11E8E007A53CC <span class="comment">/* main.m */</span>; &#125;;</span><br><span class="line"><span class="comment">/* End PBXBuildFile section */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Begin PBXFileReference section */</span></span><br><span class="line">		C1AC41E120C11E8D007A53CC <span class="comment">/* iOS_Project.app */</span> = &#123;<span class="attr">isa</span> = PBXFileReference; <span class="attr">explicitFileType</span> = wrapper.application; <span class="attr">includeInIndex</span> = <span class="number">0</span>; <span class="attr">path</span> = iOS_Project.app; <span class="attr">sourceTree</span> = BUILT_PRODUCTS_DIR; &#125;;</span><br><span class="line">		C1AC41E420C11E8D007A53CC <span class="comment">/* AppDelegate.h */</span> = &#123;<span class="attr">isa</span> = PBXFileReference; <span class="attr">lastKnownFileType</span> = sourcecode.c.h; <span class="attr">path</span> = AppDelegate.h; <span class="attr">sourceTree</span> = <span class="string">"&lt;group&gt;"</span>; &#125;;</span><br><span class="line">		C1AC41E520C11E8D007A53CC <span class="comment">/* AppDelegate.m */</span> = &#123;<span class="attr">isa</span> = PBXFileReference; <span class="attr">lastKnownFileType</span> = sourcecode.c.objc; <span class="attr">path</span> = AppDelegate.m; <span class="attr">sourceTree</span> = <span class="string">"&lt;group&gt;"</span>; &#125;;</span><br><span class="line">		C1AC41E720C11E8D007A53CC <span class="comment">/* ViewController.h */</span> = &#123;<span class="attr">isa</span> = PBXFileReference; <span class="attr">lastKnownFileType</span> = sourcecode.c.h; <span class="attr">path</span> = ViewController.h; <span class="attr">sourceTree</span> = <span class="string">"&lt;group&gt;"</span>; &#125;;</span><br><span class="line">		C1AC41E820C11E8D007A53CC <span class="comment">/* ViewController.m */</span> = &#123;<span class="attr">isa</span> = PBXFileReference; <span class="attr">lastKnownFileType</span> = sourcecode.c.objc; <span class="attr">path</span> = ViewController.m; <span class="attr">sourceTree</span> = <span class="string">"&lt;group&gt;"</span>; &#125;;</span><br><span class="line">		C1AC41EB20C11E8D007A53CC <span class="comment">/* Base */</span> = &#123;<span class="attr">isa</span> = PBXFileReference; <span class="attr">lastKnownFileType</span> = file.storyboard; <span class="attr">name</span> = Base; <span class="attr">path</span> = Base.lproj/Main.storyboard; <span class="attr">sourceTree</span> = <span class="string">"&lt;group&gt;"</span>; &#125;;</span><br><span class="line">		C1AC41ED20C11E8E007A53CC <span class="comment">/* Assets.xcassets */</span> = &#123;<span class="attr">isa</span> = PBXFileReference; <span class="attr">lastKnownFileType</span> = folder.assetcatalog; <span class="attr">path</span> = Assets.xcassets; <span class="attr">sourceTree</span> = <span class="string">"&lt;group&gt;"</span>; &#125;;</span><br><span class="line">		C1AC41F020C11E8E007A53CC <span class="comment">/* Base */</span> = &#123;<span class="attr">isa</span> = PBXFileReference; <span class="attr">lastKnownFileType</span> = file.storyboard; <span class="attr">name</span> = Base; <span class="attr">path</span> = Base.lproj/LaunchScreen.storyboard; <span class="attr">sourceTree</span> = <span class="string">"&lt;group&gt;"</span>; &#125;;</span><br><span class="line">		C1AC41F220C11E8E007A53CC <span class="comment">/* Info.plist */</span> = &#123;<span class="attr">isa</span> = PBXFileReference; <span class="attr">lastKnownFileType</span> = text.plist.xml; <span class="attr">path</span> = Info.plist; <span class="attr">sourceTree</span> = <span class="string">"&lt;group&gt;"</span>; &#125;;</span><br><span class="line">		C1AC41F320C11E8E007A53CC <span class="comment">/* main.m */</span> = &#123;<span class="attr">isa</span> = PBXFileReference; <span class="attr">lastKnownFileType</span> = sourcecode.c.objc; <span class="attr">path</span> = main.m; <span class="attr">sourceTree</span> = <span class="string">"&lt;group&gt;"</span>; &#125;;</span><br><span class="line"><span class="comment">/* End PBXFileReference section */</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/* Begin PBXFrameworksBuildPhase section */</span></span><br><span class="line">		C1AC41DE20C11E8D007A53CC <span class="comment">/* Frameworks */</span> = &#123;</span><br><span class="line">			<span class="attr">isa</span> = PBXFrameworksBuildPhase;</span><br><span class="line">			<span class="attr">buildActionMask</span> = <span class="number">2147483647</span>;</span><br><span class="line">			<span class="attr">files</span> = (</span><br><span class="line">			);</span><br><span class="line">			<span class="attr">runOnlyForDeploymentPostprocessing</span> = <span class="number">0</span>;</span><br><span class="line">		&#125;;</span><br><span class="line"><span class="comment">/* End PBXFrameworksBuildPhase section */</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
<h3 id="4-实现原理是什么"><a href="#4-实现原理是什么" class="headerlink" title="4. 实现原理是什么"></a>4. 实现原理是什么</h3><p>操作以上文件内的内容并回写即可完成配置.前提一个地方都不要出现错误,否则Xcode就会”不认得”这个文件(文件损坏)</p>
<p>由于需要操作pbxproj文件的内容,所以一定会发生硬盘上的IO操作.为了高效,减少硬盘的IO.将pbxproj文件读取后反序列化再存入内存中缓存起来,所有的IO操作均在内存中,这样一来会比在硬盘中快速高效地多,最终在所有的操作完毕后将缓存在内存中的数据序列化再写回硬盘中.</p>
<p>整体流程大概是这样了,还有几处细节:</p>
<blockquote>
<ul>
<li>初始化XcodeManager对象后多次调用库去操作同一个工程文件,如何最大的提升效率?在这里我将上次使用了的pbxproj文件路径和内容(二进制)的hash值存储在内存中,当再次调用解析工程文件的时候如果还是同一个文件,直接返回在内存中缓存的数据即可,加速数据解析.这里还有个不太严谨的问题,只使用Data的hash去对比容易碰撞.将来的版本中将会解决这个问题.关键代码如下:<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> fileData = try <span class="built_in">Data</span>(contentsOf: fileUrl)</span><br><span class="line"><span class="keyword">let</span> hashValue = fileData.hashValue</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">self</span>._hashTag == hashValue &amp;&amp; !<span class="built_in">self</span>._cacheProjet.isEmpty) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">self</span>._cacheProjet</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">self</span>._filePath = filePath</span><br><span class="line"><span class="built_in">self</span>._hashTag = hashValue</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="built_in">data</span> = try PropertyListSerialization.propertyList(from: fileData, options: .mutableContainersAndLeaves, format: nil)</span><br><span class="line"><span class="built_in">self</span>._cacheProjet = JSON(<span class="built_in">data</span>)</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>文件的内部机制,需要对所有的对象生成新的UUID,我们平时在Xcode中看到的每一个文件列表,每一个配置文件的Value,都有对应的UUID.在文件内部,所有的UUID不得重复,长度:24,全大写…,关键代码如下:<figure class="highlight lasso"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// generate a new uuid</span></span><br><span class="line">fileprivate func generateUuid() -&gt; <span class="built_in">String</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">self</span>._cacheProjet.isEmpty) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="built_in">String</span>()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> uuid = UUID().uuidString.replacingOccurrences(of: <span class="string">"-"</span>, <span class="keyword">with</span>: <span class="string">""</span>).suffix(<span class="number">24</span>).uppercased()</span><br><span class="line">    <span class="keyword">let</span> <span class="built_in">array</span> = <span class="built_in">self</span>.allUuids(<span class="built_in">self</span>._cacheProjet)</span><br><span class="line">    <span class="keyword">if</span> (<span class="built_in">array</span>.index(of: uuid) ?? <span class="number">-1</span> &gt;= <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="keyword">return</span> generateUuid()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> uuid</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li>文件保存时,看似序列化写回磁盘是件很简单的事情.但还有编码问题需要处理.直接写回磁盘会有中文乱码问题,需要把中文内容的Unicode标量值拿出来转换为<a href="https://en.wikipedia.org/wiki/Numeric_character_reference" target="_blank" rel="noopener">Numeric character reference</a>,这里写入了两次,目前我还没有好的解决方法.第一次把内存中数据序列化写入到磁盘上,第二次处理中文乱码读取后再次写入.好在这两次写入只是在调用<code>save()</code>函数时候发生.主要代码:</li>
</ul>
</blockquote>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">fileprivate</span> <span class="function"><span class="keyword">func</span> <span class="title">saveProject</span><span class="params">(fileURL: URL, withPropertyList list: Any)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> url = fileURL</span><br><span class="line">        </span><br><span class="line">        <span class="function"><span class="keyword">func</span> <span class="title">handleEncode</span><span class="params">(fileURL: URL)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">            <span class="function"><span class="keyword">func</span> <span class="title">encodeString</span><span class="params">(<span class="number">_</span> str: String)</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> result = <span class="type">String</span>()</span><br><span class="line">                <span class="keyword">for</span> scalar <span class="keyword">in</span> str.unicodeScalars &#123;</span><br><span class="line">                    <span class="keyword">if</span> (scalar.value &gt; <span class="number">0x4e00</span> &amp;&amp; scalar.value &lt; <span class="number">0x9fff</span>) &#123;</span><br><span class="line">                        result += <span class="type">String</span>(format: <span class="string">"&amp;#%04d;"</span>, scalar.value)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        result += scalar.description</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> result</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">do</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> txt = <span class="keyword">try</span> <span class="type">String</span>(contentsOf: fileURL, encoding: .utf8)</span><br><span class="line">                txt = encodeString(txt)</span><br><span class="line">                <span class="keyword">try</span> txt.write(to: fileURL, atomically: <span class="literal">true</span>, encoding: .utf8)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">                xcodeManagerPrintLog(<span class="string">"Translate chinese characters to mathematical symbols error: <span class="subst">\(error.localizedDescription)</span>"</span>, type: .error)</span><br><span class="line">                <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> data = <span class="keyword">try</span> <span class="type">PropertyListSerialization</span>.data(fromPropertyList: list, format: .xml, options: <span class="number">0</span>)</span><br><span class="line">            <span class="keyword">try</span> data.write(to: url, options: .atomic)</span><br><span class="line">            <span class="keyword">return</span> handleEncode(fileURL: url)</span><br><span class="line">        &#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">            xcodeManagerPrintLog(<span class="string">"Save project file failed: <span class="subst">\(error.localizedDescription)</span>"</span>, type: .error)</span><br><span class="line">            <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h3 id="5-如何使用"><a href="#5-如何使用" class="headerlink" title="5. 如何使用"></a>5. 如何使用</h3><p>你需要在你的swift项目中的<code>Package.swift</code>文件中写入:<br><figure class="highlight gradle"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> PackageDescription</span><br><span class="line">let <span class="keyword">package</span> = <span class="keyword">Package</span>(</span><br><span class="line">    name: <span class="string">"YourProjectName"</span>,</span><br><span class="line">    <span class="keyword">dependencies</span>: [.<span class="keyword">package</span>(url: <span class="string">"https://github.com/ZhengShouDong/XcodeManager.git"</span>, <span class="keyword">from</span>: <span class="string">"0.1.1"</span>)],</span><br><span class="line">    targets: .target(name: <span class="string">"YourProjectName"</span>, <span class="keyword">dependencies</span>: [<span class="string">"XcodeManager"</span>]))</span><br></pre></td></tr></table></figure></p>
<p>然后使用<code>swift package update</code>命令来拉取XcodeManager作为依赖使用.<br>具体使用方法和API请看项目的<a href="https://github.com/ZhengShouDong/XcodeManager/blob/master/README.md" target="_blank" rel="noopener">README</a>.</p>
<hr>
</div><div class="tags"><a href="/tags/swift/">swift</a></div><div class="post-nav"><a class="next" href="/2016/09/12/nil,Nil,NULL,NSNull的区别/">nil,Nil,NULL,NSNull的区别</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form class="search-form" action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="https://zhengshoudong.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/iOS开发/" style="font-size: 15px;">iOS开发</a> <a href="/tags/swift/" style="font-size: 15px;">swift</a> <a href="/tags/Mac程序/" style="font-size: 15px;">Mac程序</a> <a href="/tags/CocoaPods/" style="font-size: 15px;">CocoaPods</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/06/17/如何高效管理Xcode工程/">如何使用swift高效管理Xcode工程</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/09/12/nil,Nil,NULL,NSNull的区别/">nil,Nil,NULL,NSNull的区别</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/27/关于Xcode8部分不能用快捷注释的解决方法/">关于Xcode8部分不能用快捷注释的解决方法</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/10/关于安装Ruby以及Rvm的方法教程/">关于安装Ruby以及Rvm的方法教程</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/08/显示隐藏系统文件工具/">显示,隐藏系统文件工具</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/08/需要开机自启Apache服务的看过来/">需要开机自启Apache服务的看过来</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/06/Swift多线程/">Swift多线程</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/08/03/APP设计步骤以及注意事项-更新中/">APP设计步骤以及注意事项(更新中)</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/29/关于iOS多线程的部分理解/">关于iOS多线程的部分理解</a></li><li class="post-list-item"><a class="post-list-link" href="/2016/07/27/Block与GCD笔记/">Block与GCD笔记</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">郑郑同学.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a class="show" id="rocket" href="#top"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.3.5/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>